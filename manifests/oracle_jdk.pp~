class oracle_jdk {
  include apt

  $oracle_jdk_repo = 'ppa:webupd8team/java'

  Exec['apt_update'] -> Apt::Ppa[$oracle_jdk_repo] -> Exec['accept_oracle_license'] -> Package['oracle-jdk7-installer']

  exec { 'apt_update':
    command => '/usr/bin/apt-get update'
  }

  apt::ppa { $oracle_jdk_repo: }

  exec { 'accept_oracle_license':
    command => 'echo debconf shared/accepted-oracle-license-v1-1 select true | sudo debconf-set-selections && echo debconf shared/accepted-oracle-license-v1-1 seen true | sudo debconf-set-selections',
    path    => '/usr/bin/:/bin/',
    logoutput => true
  }

  package { 'oracle-jdk7-installer':
    ensure => present
  }
}
